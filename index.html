<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- CSRF Token -->
    <meta name="csrf-token" content="3kgIVH1fH5PJyrJguMN52mOkox8KMlTCbyUquNAy">
    <title>Net-zero Carbon Smart City</title>
    <link rel="stylesheet" href="./css/leaflet.css"/>
    <link rel="stylesheet" type="text/css" href="./css/energy.css">
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="./js/leaflet.js"></script>
    <script src="./js/leaflet.ajax.min.js"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>
    <script src="https://code.highcharts.com/modules/accessibility.js"></script>
      
    <style type="text/css">
        #map{
          position: absolute;
          top: 0;
          bottom: 0;
          width: 100%;
        }
     </style>
</head>

<body class="sidebar-mini sidebar-collapse layout-fixed">
<div class="content-wrapper" id="map">
    <div style="position: absolute;left: 1em;z-index: 999;display: block;top:2em;">
        <div class="d-flex">
            <div class="my-auto" style="z-index: 2;">
            <br>
            <div style="font-size: 32px;color: white; background-color: rgba(0, 71, 171,0.7);"> &nbsp Net-zero Carbon Emission Smart City &nbsp </div>
            </div>
        </div>
    </div>
<div id="cbar_wind" style="position: absolute;left: 1em;z-index: 999;display: block;bottom:2em;">
    <div class="d-flex">
        <div class="my-auto" style="z-index: 2;">
        <img src="./img/legend.png" class="img-fluid my-auto logo" style="width: 35%">
        </div>
    </div>
</div>   
<!--<div id="containerdemand" style="position: absolute;left: 1em;z-index: 999;display: block;bottom:2em;">tes</div>   -->
    
<!-- popup -->
<div id="popup">
  <div id="closebtn">&times;</div>
  <div id="popupbar"></div>
  <div id="popupbody">
    <div id="popupcontent"></div>

    <!-- query result -->
    <div id="queryresult">
      <table id="qr_coords_table">
        <caption>Clicked coordinates <div id="zoomtopoint" class="action-zoom zoombtn"></div></caption>
        <tr><td id="qr_coords"></td></tr>
      </table>

      <table id="qr_layername_table">
        <caption>Area Percentage <div id="zoomtolayer" class="action-zoom zoombtn"></div></caption>
        <tr><td id="qr_layername"></td></tr>
      </table>

      <table id="qr_attrs_table">
        <caption>Attributes</caption>
      </table>

      <!-- camera actions and measure tool -->
      <div id="powergenbtn" class="action-btn">Distributed power generation</div>
      <div id="distbtn" class="action-btn">Energy distribution optimization </div>
      <div id="storagebtn" class="action-btn">Energy smart storage </div>
      <div id="demandbtn" class="action-btn">Energy demand (forecast) </div>
      <div id="supplybtn" class="action-btn">Energy supply (forecast) </div>
      <div id="balancebtn" class="action-btn">Energy supply and demand analysis </div>  
                
    </div>

    <!-- page info -->
    <div id="pageinfo">
      <h1>Current View URL</h1>
      <div><input id="urlbox" type="text"></div>

    </div>
  </div>
</div>

<!-- popup forecast -->
<div id="popupdemand">
  <div id="closebtn_f">&times;</div>
  <div id="popupbar"></div>
  <div id="popupbody">
    <div id="popupcontent"></div>
      <!-- Forecast -->
      <div id="forecast">
        <table id="qr_forecast_table">
              <caption>Forecast of Energy Demand</caption>
              <tr><td id="forecast_curve"><figure class="highcharts-figure">
                <div id="containerdemand"></div>
                <p class="highcharts-description">
                    Time series of demand forecast.
                </p>
            </figure>
          </td></tr>
        </table>
      </div>
  </div>
</div>
    

</body>
<script src="./js/energy.js"></script> 
    <script>
        (async () => {

    const data = await fetch(
        'https://www.highcharts.com/samples/data/usdeur.json'
    ).then(response => response.json());

    Highcharts.chart('containerdemand', {
        chart: {
            zoomType: 'x'
        },
        title: {
            text: 'Energy Demand Forecast',
            align: 'left'
        },
        subtitle: {
            text: document.ontouchstart === undefined ?
                'Click and drag in the plot area to zoom in' : 'Pinch the chart to zoom in',
            align: 'left'
        },
        xAxis: {
            type: 'datetime'
        },
        yAxis: {
            title: {
                text: 'Exchange rate'
            }
        },
        legend: {
            enabled: false
        },
        plotOptions: {
            area: {
                fillColor: {
                    linearGradient: {
                        x1: 0,
                        y1: 0,
                        x2: 0,
                        y2: 1
                    },
                    stops: [
                        [0, Highcharts.getOptions().colors[0]],
                        [1, Highcharts.color(Highcharts.getOptions().colors[0]).setOpacity(0).get('rgba')]
                    ]
                },
                marker: {
                    radius: 2
                },
                lineWidth: 1,
                states: {
                    hover: {
                        lineWidth: 1
                    }
                },
                threshold: null
            }
        },

        series: [{
            type: 'area',
            name: 'USD to EUR',
            data: data
        }]
    });
})();
    </script>
</html>
